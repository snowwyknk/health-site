<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–¥–æ—Ä–æ–≤—ã–π –û–±—Ä–∞–∑ –ñ–∏–∑–Ω–∏ & –≠–∫–æ–ª–æ–≥–∏—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<script>
// –î–∞–Ω–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
const climateQuestions = [
    {
        question: "–ö–∞–∫–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –∫–ª–∏–º–∞—Ç?",
        options: [
            { text: "üöó –õ–∏—á–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å", correct: false, impact: -15, icon: "üöó" },
            { text: "üöå –û–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", correct: true, impact: 10, icon: "üöå" },
            { text: "üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥", correct: true, impact: 15, icon: "üö≤" },
            { text: "‚úàÔ∏è –°–∞–º–æ–ª–µ—Ç", correct: false, impact: -25, icon: "‚úàÔ∏è" }
        ]
    },
    {
        question: "–ß—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –≤—Å–µ–≥–æ —Å–Ω–∏–∂–∞–µ—Ç —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥?",
        options: [
            { text: "üí° –í—ã–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç", correct: true, impact: 5, icon: "üí°" },
            { text: "üå± –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ 1 –¥–µ–Ω—å –≤ –Ω–µ–¥–µ–ª—é", correct: true, impact: 8, icon: "üå±" },
            { text: "üö∞ –ü–∏—Ç—å –±—É—Ç–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–æ–¥—É", correct: false, impact: -12, icon: "üö∞" },
            { text: "üõí –ü–æ–∫—É–ø–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã", correct: true, impact: 7, icon: "üõí" }
        ]
    },
    {
        question: "–ö–∞–∫–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏ —Å–∞–º—ã–π —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–π?",
        options: [
            { text: "‚òÄÔ∏è –°–æ–ª–Ω–µ—á–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", correct: true, impact: 12, icon: "‚òÄÔ∏è" },
            { text: "üõ¢Ô∏è –£–≥–æ–ª—å", correct: false, impact: -20, icon: "üõ¢Ô∏è" },
            { text: "üí® –í–µ—Ç—Ä—è–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", correct: true, impact: 11, icon: "üí®" },
            { text: "‚ö° –ê—Ç–æ–º–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", correct: true, impact: 9, icon: "‚ö°" }
        ]
    },
    {
        question: "–ß—Ç–æ —É—Ö—É–¥—à–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–æ—Ç–µ–ø–ª–µ–Ω–∏–µ–º?",
        options: [
            { text: "üå≥ –í—ã—Ä—É–±–∫–∞ –ª–µ—Å–æ–≤", correct: false, impact: -18, icon: "üå≥" },
            { text: "üè≠ –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –≤—ã–±—Ä–æ—Å—ã", correct: false, impact: -22, icon: "üè≠" },
            { text: "üöó –ß–∞—Å—Ç—ã–µ –ø–æ–µ–∑–¥–∫–∏ –Ω–∞ –∞–≤—Ç–æ", correct: false, impact: -16, icon: "üöó" },
            { text: "‚úÖ –í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–µ", correct: true, impact: 15, icon: "‚úÖ" }
        ]
    },
    {
        question: "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ?",
        options: [
            { text: "üîå –û—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞—Ä—è–¥–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Ä–æ–∑–µ—Ç–∫–µ", correct: false, impact: -8, icon: "üîå" },
            { text: "üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LED –ª–∞–º–ø—ã", correct: true, impact: 9, icon: "üí°" },
            { text: "‚ùÑÔ∏è –°—Ç–∞–≤–∏—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Ä—è–¥–æ–º —Å –ø–ª–∏—Ç–æ–π", correct: false, impact: -10, icon: "‚ùÑÔ∏è" },
            { text: "üñ•Ô∏è –ù–µ –≤—ã–∫–ª—é—á–∞—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞ –Ω–æ—á—å", correct: false, impact: -12, icon: "üñ•Ô∏è" }
        ]
    },
    {
        question: "–ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ—Ä–æ—Ç—å—Å—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–ª–∏–º–∞—Ç–∞?",
        options: [
            { text: "üåø –ü–æ—Å–∞–¥–∫–∞ –¥–µ—Ä–µ–≤—å–µ–≤", correct: true, impact: 14, icon: "üåø" },
            { text: "üîÑ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Ö–æ–¥–æ–≤", correct: true, impact: 11, icon: "üîÑ" },
            { text: "üíß –≠–∫–æ–Ω–æ–º–∏—è –≤–æ–¥—ã", correct: true, impact: 8, icon: "üíß" },
            { text: "‚úÖ –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–µ—Ä–Ω—ã", correct: true, impact: 16, icon: "‚úÖ" }
        ]
    },
    {
        question: "–ö–∞–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç –∏–º–µ–µ—Ç –Ω–∞–∏–±–æ–ª—å—à–∏–π —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥?",
        options: [
            { text: "ü•¶ –û–≤–æ—â–∏ –º–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞", correct: false, impact: 6, icon: "ü•¶" },
            { text: "ü•© –ì–æ–≤—è–¥–∏–Ω–∞", correct: true, impact: -18, icon: "ü•©" },
            { text: "üçé –§—Ä—É–∫—Ç—ã –ø–æ —Å–µ–∑–æ–Ω—É", correct: false, impact: 5, icon: "üçé" },
            { text: "üçû –•–ª–µ–±", correct: false, impact: 4, icon: "üçû" }
        ]
    },
    {
        question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞—Ä–Ω–∏–∫–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç?",
        options: [
            { text: "üå°Ô∏è –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–ø–ª–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π", correct: true, impact: 10, icon: "üå°Ô∏è" },
            { text: "üî• –°–∂–∏–≥–∞–Ω–∏–µ –ª–µ—Å–æ–≤", correct: false, impact: -12, icon: "üî•" },
            { text: "üè≠ –ó–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ –≤–æ–∑–¥—É—Ö–∞ –∑–∞–≤–æ–¥–∞–º–∏", correct: false, impact: -14, icon: "üè≠" },
            { text: "‚ùÑÔ∏è –ü–æ—Ö–æ–ª–æ–¥–∞–Ω–∏–µ –∫–ª–∏–º–∞—Ç–∞", correct: false, impact: -8, icon: "‚ùÑÔ∏è" }
        ]
    },
    {
        question: "–ö–∞–∫ —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–ª–∞—Å—Ç–∏–∫–∞?",
        options: [
            { text: "üõçÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ —Å—É–º–∫–∏", correct: true, impact: 9, icon: "üõçÔ∏è" },
            { text: "üíß –ü–∏—Ç—å –∏–∑ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–π –±—É—Ç—ã–ª–∫–∏", correct: true, impact: 8, icon: "üíß" },
            { text: "ü•° –ü–æ–∫—É–ø–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ —É–ø–∞–∫–æ–≤–∫–∏", correct: true, impact: 10, icon: "ü•°" },
            { text: "‚úÖ –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–µ—Ä–Ω—ã", correct: true, impact: 12, icon: "‚úÖ" }
        ]
    },
    {
        question: "–ß—Ç–æ —Ç–∞–∫–æ–µ —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ?",
        options: [
            { text: "üìà –†–æ—Å—Ç –ª—é–±–æ–π —Ü–µ–Ω–æ–π", correct: false, impact: -15, icon: "üìà" },
            { text: "üå± –†–∞–∑–≤–∏—Ç–∏–µ –±–µ–∑ —É—â–µ—Ä–±–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π", correct: true, impact: 20, icon: "üå±" },
            { text: "üí∞ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å", correct: false, impact: -12, icon: "üí∞" },
            { text: "üè≠ –ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è", correct: false, impact: -16, icon: "üè≠" }
        ]
    }
];

class ClimateQuiz {
    constructor() {
        this.currentQuestion = 0;
        this.health = 100;
        this.correctAnswers = 0;
        this.co2Saved = 0;
        this.questions = [...climateQuestions];
        this.shuffleQuestions();
    }

    shuffleQuestions() {
        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã, –Ω–æ –±–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ 10
        this.questions = this.questions
            .sort(() => Math.random() - 0.5)
            .slice(0, 10);
    }

    displayQuestion() {
        if (this.currentQuestion >= this.questions.length) {
            this.showResults();
            return;
        }

        const question = this.questions[this.currentQuestion];
        document.getElementById('question-text').textContent = question.question;
        document.getElementById('question-number').textContent = this.currentQuestion + 1;

        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = '';

        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.innerHTML = `
                <span class="option-icon">${option.icon}</span>
                <span class="option-text">${option.text}</span>
            `;
            button.onclick = () => this.checkAnswer(option, button);
            optionsContainer.appendChild(button);
        });

        this.updateProgress();
    }

    checkAnswer(selectedOption, buttonElement) {
        const question = this.questions[this.currentQuestion];
        const options = document.querySelectorAll('.option-btn');

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        options.forEach(btn => {
            const optionText = btn.querySelector('.option-text').textContent;
            const correctOption = question.options.find(opt => opt.text === optionText);
            
            if (correctOption.correct) {
                btn.classList.add('correct');
            } else if (btn === buttonElement && !selectedOption.correct) {
                btn.classList.add('wrong');
                btn.classList.add('shake');
            }
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        if (selectedOption.correct) {
            this.correctAnswers++;
            this.co2Saved += selectedOption.impact;
            this.health = Math.min(100, this.health + selectedOption.impact);
        } else {
            this.health = Math.max(0, this.health + selectedOption.impact);
        }

        this.updateStats();

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            this.currentQuestion++;
            this.displayQuestion();
        }, 2000);
    }

    updateStats() {
        document.getElementById('health-value').textContent = `${Math.max(0, this.health)}%`;
        document.getElementById('planet-health-bar').style.width = `${Math.max(0, this.health)}%`;
        
        // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç health bar –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–¥–æ—Ä–æ–≤—å—è
        const healthBar = document.getElementById('planet-health-bar');
        if (this.health > 70) {
            healthBar.style.background = 'linear-gradient(90deg, #4CAF50, #8BC34A)';
        } else if (this.health > 30) {
            healthBar.style.background = 'linear-gradient(90deg, #FF9800, #FFB74D)';
        } else {
            healthBar.style.background = 'linear-gradient(90deg, #f44336, #EF5350)';
            healthBar.classList.add('shake');
        }

        document.getElementById('correct-count').textContent = this.correctAnswers;
        document.getElementById('co2-saved').textContent = Math.max(0, this.co2Saved);
    }

    updateProgress() {
        const progress = ((this.currentQuestion + 1) / this.questions.length) * 100;
        document.getElementById('quiz-progress').style.width = `${progress}%`;
        document.getElementById('progress-text').textContent = `${this.currentQuestion + 1}/${this.questions.length}`;
    }

    showResults() {
        document.getElementById('question-section').style.display = 'none';
        document.getElementById('result-section').style.display = 'block';

        document.getElementById('final-health').textContent = `${Math.max(0, this.health)}%`;
        document.getElementById('final-correct').textContent = `${this.correctAnswers}/${this.questions.length}`;
        document.getElementById('final-co2').textContent = `${Math.max(0, this.co2Saved)} –∫–≥`;

        const achievementBadge = document.getElementById('achievement-badge');
        if (this.correctAnswers >= 9) {
            achievementBadge.innerHTML = 'üèÜ –≠–ö–û-–ì–ï–†–û–ô! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
            achievementBadge.style.background = 'linear-gradient(135deg, #FFD700, #FFC400)';
        } else if (this.correctAnswers >= 7) {
            achievementBadge.innerHTML = '‚≠ê –ó–ê–©–ò–¢–ù–ò–ö –ü–õ–ê–ù–ï–¢–´! –•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!';
            achievementBadge.style.background = 'linear-gradient(135deg, #C0C0C0, #A0A0A0)';
        } else if (this.correctAnswers >= 5) {
            achievementBadge.innerHTML = 'üå± –ù–ê–ß–ò–ù–ê–Æ–©–ò–ô –≠–ö–û–õ–û–ì! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!';
            achievementBadge.style.background = 'linear-gradient(135deg, #CD7F32, #B08D57)';
        } else {
            achievementBadge.innerHTML = 'üìö –ï–°–¢–¨ –ö –ß–ï–ú–£ –°–¢–†–ï–ú–ò–¢–¨–°–Ø! –ò–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–∞–π—Ç–∞!';
            achievementBadge.style.background = 'linear-gradient(135deg, #E0E0E0, #BDBDBD)';
        }
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
let quiz;

function startQuiz() {
    quiz = new ClimateQuiz();
    quiz.displayQuestion();
}

function restartQuiz() {
    document.getElementById('result-section').style.display = 'none';
    document.getElementById('question-section').style.display = 'block';
    startQuiz();
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', startQuiz);

// –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
const scrollObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
            const delay = entry.target.getAttribute('data-delay') || 0;
            entry.target.style.transitionDelay = `${delay}ms`;
        }
    });
}, { 
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
document.addEventListener('DOMContentLoaded', function() {
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–π —ç–ª–µ–º–µ–Ω—Ç–∞–º
    document.querySelectorAll('.stat-card, .article-card, .habit-card').forEach((el, index) => {
        el.classList.add('fade-in-scroll');
        el.setAttribute('data-delay', index * 100);
        scrollObserver.observe(el);
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    document.querySelectorAll('h1, h2').forEach((el, index) => {
        el.classList.add('slide-in-left');
        el.setAttribute('data-delay', index * 150);
        scrollObserver.observe(el);
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ —Ñ–æ—Ä–º
    document.querySelectorAll('button, .form-input, .link-card').forEach((el, index) => {
        el.classList.add('fade-in-scroll');
        el.setAttribute('data-delay', index * 50);
        scrollObserver.observe(el);
    });
    
    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const importantElements = document.querySelectorAll('.stat-number, .progress-bar');
    importantElements.forEach(el => {
        el.classList.add('pulse-element');
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è "–ø–∞—Ä–µ–Ω–∏—è" –¥–ª—è –∏–∫–æ–Ω–æ–∫
    const floatIcons = document.querySelectorAll('.habit-icon, .food-icon');
    floatIcons.forEach((el, index) => {
        el.classList.add('float-element');
        el.style.animationDelay = `${index * 0.5}s`;
    });
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
function animateElement(elementId, animationClass) {
    const element = document.getElementById(elementId);
    if (element) {
        element.classList.add(animationClass);
        setTimeout(() => {
            element.classList.remove(animationClass);
        }, 1000);
    }
}

// –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏
document.addEventListener('click', function(e) {
    if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
        const button = e.target.tagName === 'BUTTON' ? e.target : e.target.closest('button');
        button.classList.add('heartbeat');
        setTimeout(() => {
            button.classList.remove('heartbeat');
        }, 600);
    }
});
</script>

<body>
    <header>
        <h1>üåø –¢–≤–æ–π –ü—É—Ç—å –∫ –ó–¥–æ—Ä–æ–≤—å—é –∏ –£—Å—Ç–æ–π—á–∏–≤–æ–º—É –ë—É–¥—É—â–µ–º—É</h1>
        <nav>
            <a href="{{ url_for('index') }}">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{{ url_for('show_articles') }}">üìö –°—Ç–∞—Ç—å–∏</a>
        <a href="{{ url_for('nutrition') }}">ü•ó –ü–∏—Ç–∞–Ω–∏–µ</a>
        <a href="{{ url_for('exercises') }}">üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</a>
        <a href="{{ url_for('eco_tips') }}">üåç –≠–∫–æ-—Å–æ–≤–µ—Ç—ã</a>
        <a href="{{ url_for('quiz') }}">üß† –¢–µ—Å—Ç</a>
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('add_post') }}">‚úçÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</a>
            <a href="{{ url_for('logout') }}">üö™ –í—ã–π—Ç–∏</a>
        {% else %}
            <a href="{{ url_for('login') }}">üîê –í–æ–π—Ç–∏</a>
            <a href="{{ url_for('register') }}">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
        </nav>
    </header>

    <main>
        <!-- –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è -->
        <section class="climate-section fade-in">
            <h2>üå°Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏—è</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>üìà –†–æ—Å—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã</h3>
                    <div class="stat-number">+1.2¬∞C</div>
                    <p>–°—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å –¥–æ–∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–π —ç–ø–æ—Ö–∏</p>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 60%">60% –∫ —Ü–µ–ª–∏ 2¬∞C</div>
                    </div>
                </div>
                
                <div class="stat-card warning">
                    <h3>üèîÔ∏è –¢–∞—è–Ω–∏–µ –ª–µ–¥–Ω–∏–∫–æ–≤</h3>
                    <div class="stat-number">-28%</div>
                    <p>–ü–æ—Ç–µ—Ä—è –∞—Ä–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª—å–¥–∞ —Å 1979 –≥–æ–¥–∞</p>
                    <div class="progress-container">
                        <div class="progress-bar warning" style="width: 75%">–£—Å–∫–æ—Ä—è–µ—Ç—Å—è</div>
                        <div class="progress-bar pulse-element" style="width: 60%">60% –∫ —Ü–µ–ª–∏ 2¬∞C</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <h3>üåä –£—Ä–æ–≤–µ–Ω—å –º–æ—Ä—è</h3>
                    <div class="stat-number">+23 —Å–º</div>
                    <p>–ü–æ–¥—ä–µ–º —Å 1880 –≥–æ–¥–∞</p>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 45%">+3.4 –º–º/–≥–æ–¥</div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="survival-quiz-game">
    <h2>üåç –°–ø–∞—Å–∏ –ø–ª–∞–Ω–µ—Ç—É: –í–∏–∫—Ç–æ—Ä–∏–Ω–∞-–≤—ã–∂–∏–≤–∞–Ω–∏–µ</h2>
    <p>–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ø–ª–∞–Ω–µ—Ç—ã!</p>
    
    <div class="quiz-container">
        <!-- –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–µ—Ç—ã -->
        <div class="planet-status">
            <div class="health-display">
                <div class="planet-icon">üåç</div>
                <div class="health-info">
                    <div class="health-bar">
                        <div class="health-fill" id="planet-health-bar" style="width: 100%"></div>
                    </div>
                    <span class="health-text">–ó–¥–æ—Ä–æ–≤—å–µ –ø–ª–∞–Ω–µ—Ç—ã: <span id="health-value">100%</span></span>
                </div>
            </div>
            
            <div class="game-stats">
                <div class="stat">
                    <span class="stat-icon">‚úÖ</span>
                    <span>–í–µ—Ä–Ω–æ: <span id="correct-count">0</span></span>
                </div>
                <div class="stat">
                    <span class="stat-icon">üå±</span>
                    <span>–°–ø–∞—Å–µ–Ω–æ CO‚ÇÇ: <span id="co2-saved">0</span> –∫–≥</span>
                </div>
                <div class="stat">
                    <span class="stat-icon">üî•</span>
                    <span>–í–æ–ø—Ä–æ—Å: <span id="question-number">1</span>/10</span>
                </div>
            </div>
        </div>

        <!-- –í–æ–ø—Ä–æ—Å—ã -->
        <div class="question-section" id="question-section">
            <h3 id="question-text">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω–∏–∑–∏—Ç—å —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥:</h3>
            <div class="options-grid" id="options-container">
            </div>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div class="result-section" id="result-section" style="display: none;">
            <div class="result-card">
                <h3 id="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã!</h3>
                <div class="result-stats">
                    <div class="final-stat">
                        <span class="stat-label">–ò—Ç–æ–≥–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –ø–ª–∞–Ω–µ—Ç—ã:</span>
                        <span class="stat-value" id="final-health">100%</span>
                    </div>
                    <div class="final-stat">
                        <span class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:</span>
                        <span class="stat-value" id="final-correct">0/10</span>
                    </div>
                    <div class="final-stat">
                        <span class="stat-label">–°–ø–∞—Å–µ–Ω–æ CO‚ÇÇ:</span>
                        <span class="stat-value" id="final-co2">0 –∫–≥</span>
                    </div>
                    <div class="achievement" id="achievement-badge"></div>
                </div>
                <button onclick="restartQuiz()" class="restart-btn">üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ -->
        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="quiz-progress" style="width: 10%"></div>
            </div>
            <div class="progress-text">–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="progress-text">1/10</span></div>
        </div>
    </div>
</section>

        <section class="intro fade-in">
            <h2>üíö –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?</h2>
            <p>–ó–¥–æ—Ä–æ–≤—å–µ —á–µ–ª–æ–≤–µ–∫–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ –ø–ª–∞–Ω–µ—Ç—ã –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω–æ —Å–≤—è–∑–∞–Ω—ã. –£—Å—Ç–æ–π—á–∏–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ - –∫–ª—é—á –∫ –Ω–∞—à–µ–º—É –±—É–¥—É—â–µ–º—É.</p>
            <div style="text-align: center; margin: 20px 0;">
                <img src="https://images.unsplash.com/photo-1569163139394-de44cb54d0c4?w=600" alt="–ó–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ —ç–∫–æ–ª–æ–≥–∏—è" style="max-width: 100%; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
            </div>
        </section>

        <section class="daily-tips fade-in">
    <h2>üå± –°–æ–≤–µ—Ç—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
    <div class="impact-grid">
        <div class="impact-item">
            <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=300" alt="–≠–∫–æ-–ø—Ä–∏–≤—ã—á–∫–∏" style="width: 100%; height: 150px; object-fit: cover; border-radius: 10px;">
            <h3>üíß –≠–∫–æ-–ø—Ä–∏–≤—ã—á–∫–∏</h3>
            <p>–ü–µ–π—Ç–µ –∏–∑ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–π –±—É—Ç—ã–ª–∫–∏</p>
        </div>
        <div class="impact-item">
            <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300" alt="–ü—Ä–æ–≥—É–ª–∫–∞" style="width: 100%; height: 150px; object-fit: cover; border-radius: 10px;">
            <h3>üö∂ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h3>
            <p>–ü—Ä–æ–≥—É–ª—è–π—Ç–µ—Å—å –≤–º–µ—Å—Ç–æ –ø–æ–µ–∑–¥–∫–∏ –Ω–∞ –∞–≤—Ç–æ</p>
        </div>
        <div class="impact-item">
            <img src="https://images.unsplash.com/photo-1490818387583-1baba5e638af?w=300" alt="–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ" style="width: 100%; height: 150px; object-fit: cover; border-radius: 10px;">
            <h3>ü•¶ –ü–∏—Ç–∞–Ω–∏–µ</h3>
            <p>–í—ã–±–∏—Ä–∞–π—Ç–µ –º–µ—Å—Ç–Ω—ã–µ —Å–µ–∑–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</p>
        </div>
    </div>
</section>

        <section class="quick-links fade-in">
            <h2>üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h2>
            <div class="links-grid">
                <a href="{{ url_for('nutrition') }}" class="link-card card-health">
                    <h3>ü•ó –ü–∏—Ç–∞–Ω–∏–µ</h3>
                    <p>–û—Å–Ω–æ–≤—ã –∑–¥–æ—Ä–æ–≤—å—è –∏ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞—Ü–∏–æ–Ω–∞ –Ω–∞ –¥–µ–Ω—å</p>
                    <div class="stat-number" style="color: #333;">1850 –∫–∫–∞–ª</div>
                </a>
                <a href="{{ url_for('show_articles') }}" class="link-card card-climate">
                    <h3>üìö –°—Ç–∞—Ç—å–∏</h3>
                    <p>–ó–¥–æ—Ä–æ–≤—å–µ –∏ —ç–∫–æ–ª–æ–≥–∏—è</p>
                </a>
                <a href="{{ url_for('exercises') }}" class="link-card card-climate">
                    <h3>üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</h3>
                    <p>–ö–æ–º–ø–ª–µ–∫—Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –Ω–∞ 25 –º–∏–Ω—É—Ç</p>
                    <div class="stat-number" style="color: #333;">3 –±–ª–æ–∫–∞</div>
                </a>
                <a href="{{ url_for('eco_tips') }}" class="link-card card-climate">
                    <h3>üåç –≠–∫–æ-—Å–æ–≤–µ—Ç—ã</h3>
                    <p>–£—Å—Ç–æ–π—á–∏–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</p>
                </a>
                <a href="{{ url_for('quiz') }}" class="link-card card-health">
                    <h3>üß† –¢–µ—Å—Ç</h3>
                    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞–Ω–∏—è</p>
                    <div class="stat-number" style="color: #333;">10 –≤–æ–ø—Ä–æ—Å–æ–≤</div>
                </a>
            </div>
        </section>

        <section class="habit-tracker fade-in">
    <h2>üìÖ –¢—Ä–µ–∫–µ—Ä –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫</h2>
    <div class="habits-grid">
        <div class="habit-card" data-habit="water">
            <div class="habit-header">
                <span class="habit-icon">üíß</span>
                <span class="habit-name">–ü–∏—Ç—å –≤–æ–¥—É</span>
                <button class="habit-reset" onclick="resetHabit('water')">üîÑ</button>
            </div>
            <div class="habit-progress">
                <div class="progress-bar" id="water-progress"></div>
            </div>
            <div class="habit-controls">
                <button onclick="decrementHabit('water')">‚ûñ</button>
                <span class="habit-count" id="water-count">0/8 —Å—Ç–∞–∫–∞–Ω–æ–≤</span>
                <button onclick="incrementHabit('water')">‚ûï</button>
            </div>
        </div>
        
        <div class="habit-card" data-habit="walk">
            <div class="habit-header">
                <span class="habit-icon">üö∂</span>
                <span class="habit-name">–ü—Ä–æ–≥—É–ª–∫–∞</span>
                <button class="habit-reset" onclick="resetHabit('walk')">üîÑ</button>
            </div>
            <div class="habit-progress">
                <div class="progress-bar" id="walk-progress"></div>
            </div>
            <div class="habit-controls">
                <button onclick="decrementHabit('walk')">‚ûñ</button>
                <span class="habit-count" id="walk-count">0/30 –º–∏–Ω</span>
                <button onclick="incrementHabit('walk')">‚ûï</button>
            </div>
        </div>

        <div class="habit-card" data-habit="fruit">
            <div class="habit-header">
                <span class="habit-icon">üçé</span>
                <span class="habit-name">–§—Ä—É–∫—Ç—ã</span>
                <button class="habit-reset" onclick="resetHabit('fruit')">üîÑ</button>
            </div>
            <div class="habit-progress">
                <div class="progress-bar" id="fruit-progress"></div>
            </div>
            <div class="habit-controls">
                <button onclick="decrementHabit('fruit')">‚ûñ</button>
                <span class="habit-count" id="fruit-count">0/5 –ø–æ—Ä—Ü–∏–π</span>
                <button onclick="incrementHabit('fruit')">‚ûï</button>
            </div>
        </div>

        <div class="habit-card" data-habit="sport">
            <div class="habit-header">
                <span class="habit-icon">üí™</span>
                <span class="habit-name">–°–ø–æ—Ä—Ç</span>
                <button class="habit-reset" onclick="resetHabit('sport')">üîÑ</button>
            </div>
            <div class="habit-progress">
                <div class="progress-bar" id="sport-progress"></div>
            </div>
            <div class="habit-controls">
                <button onclick="toggleHabit('sport')" class="sport-toggle">‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div class="habits-stats">
        <div class="stat">
            <span class="stat-number" id="completed-habits">0</span>
            <span class="stat-label">–≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</span>
        </div>
        <div class="stat">
            <span class="stat-number" id="total-progress">0%</span>
            <span class="stat-label">–æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</span>
        </div>
    </div>
</section>

        <section class="weekly-challenge fade-in">
            <h2>üéØ –ò—Å–ø—ã—Ç–∞–Ω–∏–µ –Ω–µ–¥–µ–ª–∏</h2>
            <div class="challenge-card">
                <h3>‚ôªÔ∏è 7 –¥–Ω–µ–π –±–µ–∑ –ø–ª–∞—Å—Ç–∏–∫–∞</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç–∏–∫–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é</p>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 45%">45%</div>
                </div>
            </div>
        </section>
    </main>
        <section class="quiz-promo fade-in">
            <div class="quiz-card">
                <h2>üß† –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!</h2>
                <p>–ü—Ä–æ–π–¥–∏—Ç–µ –Ω–∞—à —Ç–µ—Å—Ç –∏ —É–∑–Ω–∞–π—Ç–µ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –≤—ã —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö –∑–¥–æ—Ä–æ–≤—å—è –∏ —ç–∫–æ–ª–æ–≥–∏–∏</p>
                <div class="quiz-stats">
            <div class="quiz-stat">
                <span class="stat-number">10</span>
                <span class="stat-label">–≤–æ–ø—Ä–æ—Å–æ–≤</span>
            </div>
                <div class="quiz-stat">
                    <span class="stat-number">2</span>
                    <span class="stat-label">—Ç–µ–º—ã</span>
            </div>
            <div class="quiz-stat">
                <span class="stat-number">5</span>
                <span class="stat-label">–º–∏–Ω—É—Ç</span>
            </div>
        </div>
        <a href="{{ url_for('quiz') }}" class="quiz-button">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç üöÄ</a>
    </div>
</section>
    <footer>
        <p>¬© 2025 –¢–≤–æ–π –ì–∏–¥ –ø–æ –ó–¥–æ—Ä–æ–≤—å—é –∏ –£—Å—Ç–æ–π—á–∏–≤–æ–º—É –†–∞–∑–≤–∏—Ç–∏—é</p>
    </footer>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0';
                setTimeout(() => {
                    bar.style.width = width;
                }, 500);
            });
        });
    </script>
    <script>
// –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—ã—á–µ–∫
const habits = {
    water: { current: 0, target: 8, unit: '—Å—Ç–∞–∫–∞–Ω–æ–≤' },
    walk: { current: 0, target: 30, unit: '–º–∏–Ω' },
    fruit: { current: 0, target: 5, unit: '–ø–æ—Ä—Ü–∏–π' },
    sport: { current: 0, target: 1, unit: '—Ä–∞–∑' }
};

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
function loadHabits() {
    const saved = localStorage.getItem('habits');
    if (saved) {
        Object.assign(habits, JSON.parse(saved));
    }
    updateAllHabits();
}

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
function saveHabits() {
    localStorage.setItem('habits', JSON.stringify(habits));
    updateStats();
}

// –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–∏–≤—ã—á–∫—É
function incrementHabit(habitId) {
    if (habits[habitId].current < habits[habitId].target) {
        habits[habitId].current++;
        updateHabit(habitId);
        saveHabits();
        
        // –ê–Ω–∏–º–∞—Ü–∏—è
        const card = document.querySelector(`[data-habit="${habitId}"]`);
        card.style.transform = 'scale(1.05)';
        setTimeout(() => {
            card.style.transform = 'scale(1)';
        }, 200);
    }
}

// –£–º–µ–Ω—å—à–∞–µ–º –ø—Ä–∏–≤—ã—á–∫—É
function decrementHabit(habitId) {
    if (habits[habitId].current > 0) {
        habits[habitId].current--;
        updateHabit(habitId);
        saveHabits();
    }
}

// –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è —Å–ø–æ—Ä—Ç–∞
function toggleHabit(habitId) {
    habits[habitId].current = habits[habitId].current === 0 ? 1 : 0;
    updateHabit(habitId);
    saveHabits();
}

// –°–±—Ä–æ—Å –ø—Ä–∏–≤—ã—á–∫–∏
function resetHabit(habitId) {
    if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —ç—Ç–æ–π –ø—Ä–∏–≤—ã—á–∫–µ?')) {
        habits[habitId].current = 0;
        updateHabit(habitId);
        saveHabits();
    }
}

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
function updateHabit(habitId) {
    const habit = habits[habitId];
    const progress = (habit.current / habit.target) * 100;
    
    document.getElementById(`${habitId}-progress`).style.width = `${progress}%`;
    document.getElementById(`${habitId}-count`).textContent = 
        habitId === 'sport' 
            ? (habit.current ? '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ' : '‚ö™ –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ')
            : `${habit.current}/${habit.target} ${habit.unit}`;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    const card = document.querySelector(`[data-habit="${habitId}"]`);
    if (habit.current >= habit.target) {
        card.classList.add('completed');
    } else {
        card.classList.remove('completed');
    }
}

// –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏
function updateAllHabits() {
    Object.keys(habits).forEach(habitId => {
        updateHabit(habitId);
    });
    updateStats();
}

// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
function updateStats() {
    const totalHabits = Object.keys(habits).length;
    const completedHabits = Object.values(habits).filter(h => h.current >= h.target).length;
    const totalProgress = Math.round((completedHabits / totalHabits) * 100);
    
    document.getElementById('completed-habits').textContent = completedHabits;
    document.getElementById('total-progress').textContent = `${totalProgress}%`;
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    localStorage.setItem('lastUpdate', new Date().toDateString());
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —É—Å—Ç–∞—Ä–µ–ª–∏ –ª–∏ –¥–∞–Ω–Ω—ã–µ (–Ω–æ–≤—ã–π –¥–µ–Ω—å)
function checkDateReset() {
    const lastUpdate = localStorage.getItem('lastUpdate');
    const today = new Date().toDateString();
    
    if (lastUpdate !== today) {
        // –ù–æ–≤—ã–π –¥–µ–Ω—å - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        Object.keys(habits).forEach(habitId => {
            habits[habitId].current = 0;
        });
        updateAllHabits();
        saveHabits();
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        showDailyMotivation();
    }
}

// –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è
function showDailyMotivation() {
    const messages = [
        "üåÖ –ù–æ–≤—ã–π –¥–µ–Ω—å - –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏!",
        "üöÄ –ù–∞—á–Ω–∏ –¥–µ–Ω—å —Å –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫!",
        "üí´ –°–µ–≥–æ–¥–Ω—è —Ç—ã —Å—Ç–∞–Ω–µ—à—å –ª—É—á—à–µ, —á–µ–º –≤—á–µ—Ä–∞!",
        "üåü –¢—ã –º–æ–∂–µ—à—å –≤—Å—ë! –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ!"
    ];
    
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
    
    const motivation = document.createElement('div');
    motivation.innerHTML = `
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                   background: white; padding: 30px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
                   text-align: center; z-index: 1000; max-width: 300px;">
            <h3 style="color: var(--primary); margin-bottom: 15px;">${randomMessage}</h3>
            <button onclick="this.parentElement.remove()" 
                    style="background: var(--primary); color: white; border: none; 
                           padding: 10px 20px; border-radius: 10px; cursor: pointer;">
                –ü–æ–Ω—è—Ç–Ω–æ!
            </button>
        </div>
    `;
    document.body.appendChild(motivation);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    loadHabits();
    checkDateReset();
});
</script>
</body>
</html>